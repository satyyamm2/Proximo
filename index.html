<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proximo</title>

  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-white">
  <!-- App Container -->
  <div id="app" class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-lg sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex-shrink-0 cursor-pointer" id="brandHome">
            <span class="text-2xl font-extrabold text-indigo-600 dark:text-indigo-400">
              <span class="text-gray-900 dark:text-white">Proximo</span>
            </span>
          </div>
          <nav class="flex items-center space-x-2">
            <button data-nav="home" class="nav-btn px-3 py-2 text-sm font-medium rounded-lg transition duration-200">Home</button>
            <button data-nav="help" class="nav-btn px-3 py-2 text-sm font-medium rounded-lg transition duration-200">Help</button>

            <div id="userMenuContainer" class="relative hidden">
              <button id="userMenuBtn" class="flex items-center p-2 rounded-full bg-indigo-50 dark:bg-gray-700 text-indigo-600 dark:text-indigo-300 font-semibold hover:bg-indigo-100 dark:hover:bg-gray-600 transition duration-200">
                <i data-lucide="user" class="w-5 h-5 mr-2"></i>
                <span id="userRoleLabel" class="hidden sm:inline">User</span>
              </button>
              <div id="userDropdown" class="absolute right-0 mt-3 w-64 bg-white dark:bg-gray-700 rounded-lg shadow-xl py-1 opacity-0 pointer-events-none transition duration-200 transform scale-95 origin-top-right">
                <div class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border-b border-gray-100 dark:border-gray-600 truncate">
                  Signed in as: <br />
                  <span id="userNameLabel" class="font-bold"></span>
                </div>
                <button id="signOutBtn" class="w-full text-left flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-gray-600">
                  <i data-lucide="log-out" class="w-4 h-4 mr-2"></i> Sign Out
                </button>
              </div>
            </div>

            <button id="openAuthBtn" class="flex items-center px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg shadow-md hover:bg-indigo-700 transition duration-200">
              <i data-lucide="log-in" class="w-5 h-5 mr-2"></i> Sign In / Up
            </button>
          </nav>
        </div>
      </div>
    </header>

    <!-- Main -->
    <main class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-6">
      <!-- Loading -->
      <section id="sectionLoading" class="min-h-[60vh] hidden items-center justify-center">
        <div class="flex items-center">
          <i class="animate-spin w-8 h-8 text-indigo-500" data-lucide="loader"></i>
          <p class="ml-3 text-xl font-medium">Initializing application...</p>
        </div>
      </section>

      <!-- Auth -->
      <section id="sectionAuth" class="hidden">
        <div class="w-full max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8">
          <h2 id="authHeader" class="text-3xl font-extrabold text-center mb-6">Welcome Back</h2>

          <div class="flex justify-center mb-6 space-x-2">
            <button id="btnSignIn" class="pill active">
              Sign In
            </button>
            <button id="btnSignUp" class="pill">
              Create Account
            </button>
          </div>

          <div class="flex justify-center mb-6 space-x-4">
            <button id="btnStudent" class="role-btn active">
              <i data-lucide="user" class="w-5 h-5 mr-2"></i> I'm a Student
            </button>
            <button id="btnOrganizer" class="role-btn">
              <i data-lucide="building" class="w-5 h-5 mr-2"></i> I'm an Organizer
            </button>
          </div>

          <h3 id="authSubheader" class="text-xl font-bold mb-4 text-center">Sign In as Student</h3>

          <form id="authForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Student-only fields (shown on Sign Up) -->
            <div class="md:col-span-2 student-only hidden">
              <label class="label">Full Name <span class="req">*</span></label>
              <input id="name" class="input" placeholder="Your full name" />
            </div>
            <div class="student-only hidden">
              <label class="label">Age <span class="req">*</span></label>
              <input id="age" type="number" class="input" placeholder="18" />
            </div>
            <div class="student-only hidden">
              <label class="label">Gender <span class="req">*</span></label>
              <input id="gender" class="input" placeholder="Male / Female / Other" />
            </div>
            <div class="md:col-span-2 student-only hidden">
              <label class="label">College (Optional)</label>
              <input id="college" class="input" placeholder="College name" />
            </div>

            <!-- Organizer-only fields (shown on Sign Up) -->
            <div class="md:col-span-2 organizer-only hidden">
              <label class="label">Organization Name <span class="req">*</span></label>
              <input id="organization" class="input" placeholder="Organization" />
            </div>

            <!-- Common fields -->
            <div class="md:col-span-2">
              <label class="label">Email Address <span class="req">*</span></label>
              <input id="email" type="email" class="input" placeholder="you@example.com" />
            </div>
            <div class="md:col-span-2">
              <label class="label">Password <span class="req">*</span></label>
              <input id="password" type="password" class="input" placeholder="••••••••" />
            </div>
            <div class="md:col-span-2">
              <label class="label">Phone Number <span id="phoneReq" class="req hidden">*</span></label>
              <input id="phone" type="tel" class="input" placeholder="+91 98765 43210" />
            </div>

            <div class="md:col-span-2">
              <p id="authError" class="hidden text-sm font-medium text-red-500 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg text-center"></p>
            </div>

            <div class="md:col-span-2 space-y-3">
              <button id="authSubmit" class="btn-primary w-full">
                Continue
              </button>
            
            </div>
          </form>
        </div>
      </section>

      <!-- Student Dashboard -->
      <section id="sectionStudent" class="hidden">
        <h1 class="page-title">Explore Student Opportunities</h1>
        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0">
          <h2 class="text-2xl font-semibold">Showing <span id="eventsCount">0</span> <span id="filterLabel">All</span> Events</h2>
          <div class="relative">
            <button id="filterBtn" class="btn-primary inline-flex items-center">
              <i data-lucide="filter" class="w-4 h-4 mr-2"></i> Filter by Type: <span class="font-bold ml-1" id="filterTypeName">All</span>
            </button>
            <div id="filterMenu" class="dropdown hidden">
              <!-- Filled by JS -->
            </div>
          </div>
        </div>

        <div id="eventsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>

        <div id="noEventsBox" class="hidden lg:col-span-3 text-center p-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
          <p class="text-xl font-medium text-gray-600 dark:text-gray-300">
            No events found for the selected type. Try selecting 'All'.
          </p>
        </div>
      </section>

      <!-- Organizer Dashboard -->
      <section id="sectionOrganizer" class="hidden">
        <h1 class="page-title">Organizer Dashboard</h1>

        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-8 border-t-4 border-green-500">
          <h2 id="formTitle" class="text-2xl font-bold mb-4 flex items-center">
            <i data-lucide="plus" class="w-6 h-6 mr-2 text-green-500"></i> Post New Event
          </h2>

          <form id="eventForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="md:col-span-2">
              <label class="label">Event Title <span class="req">*</span></label>
              <input id="ev_title" class="input" placeholder="e.g., National Hackathon 2025" />
            </div>

            <div>
              <label class="label">Event Type <span class="req">*</span></label>
              <select id="ev_type" class="input">
                <!-- Filled by JS -->
              </select>
            </div>

            <div>
              <label class="label">Location (e.g., College Name, Online) <span class="req">*</span></label>
              <input id="ev_location" class="input" placeholder="ABC University / Online" />
            </div>

            <div>
              <label class="label">Date <span class="req">*</span></label>
              <input id="ev_date" type="date" class="input" />
            </div>

            <div>
              <label class="label">Timing (e.g., 9:00 AM - 5:00 PM) <span class="req">*</span></label>
              <input id="ev_timing" class="input" placeholder="10:00 AM - 4:00 PM" />
            </div>

            <div class="md:col-span-2">
              <label class="label">Organization Name <span class="req">*</span></label>
              <input id="ev_org" class="input" placeholder="Your Org" />
            </div>

            <div class="md:col-span-2">
              <label class="label">Event Link / Registration URL (Optional)</label>
              <input id="ev_link" type="url" class="input" placeholder="https://example.com/register" />
            </div>

            <div class="md:col-span-2">
              <label class="label">Description <span class="req">*</span></label>
              <textarea id="ev_desc" rows="3" class="input" placeholder="Provide a detailed description"></textarea>
            </div>

            <div class="md:col-span-2 flex space-x-4">
              <button id="saveEventBtn" class="btn-primary flex-1">
                <i data-lucide="plus" class="w-5 h-5 mr-2"></i> Post Event
              </button>
              <button id="cancelEditBtn" class="btn-secondary flex-1 hidden">
                <i data-lucide="x" class="w-5 h-5 mr-2"></i> Cancel Edit
              </button>
            </div>
          </form>
        </div>

        <h2 class="text-2xl font-bold mb-4">Your Posted Events (<span id="myCount">0</span>)</h2>
        <div id="myEventsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

        <div id="noMyEvents" class="hidden lg:col-span-3 text-center p-10 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
          <p class="text-xl font-medium text-gray-600 dark:text-gray-300">
            You have not posted any events yet. Use the form above to get started!
          </p>
        </div>
      </section>

      <!-- Help / Chatbot -->
      <section id="sectionHelp" class="hidden">
        <h1 class="page-title flex items-center">
          <i data-lucide="help-circle" class="w-8 h-8 mr-3 text-indigo-600"></i> Help Center & Guidance
        </h1>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <div>
            <h2 class="text-3xl font-bold mb-4">Website Assistant Chatbot</h2>
            <p class="mb-4 text-gray-600 dark:text-gray-400">
              Use the assistant to get quick answers on how to use the platform, manage your account, or find events.
            </p>

            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden flex flex-col h-[70vh] max-h-[700px] border border-gray-200 dark:border-gray-700">
              <div class="p-4 bg-indigo-600 text-white font-bold flex items-center">
                <i data-lucide="send" class="w-5 h-5 mr-2"></i> Event Assistant Chatbot
              </div>
              <div id="chatContainer" class="flex-1 overflow-y-auto p-4 space-y-4"></div>
              <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex">
                <input id="chatInput" type="text" placeholder="Type your question (e.g., how to create event)" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-l-lg focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white" />
                <button id="chatSendBtn" class="px-4 py-2 bg-indigo-600 text-white rounded-r-lg hover:bg-indigo-700 transition duration-200 flex items-center justify-center">
                  <i data-lucide="send" class="w-5 h-5"></i>
                </button>
              </div>
            </div>
          </div>

          <div>
            <h2 class="text-3xl font-bold mb-4">Website Usage Guidance (Flow)</h2>
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6">
              <ol class="relative border-l border-indigo-200 dark:border-indigo-700 space-y-6">
                <li class="ml-6">
                  <span class="step">1</span>
                  <h3 class="step-title">Authentication</h3>
                  <p class="step-desc">Choose to Sign In or Create Account as either a <i>Student</i> or an <i>Organizer</i>. All data is persistently saved.</p>
                </li>
                <li class="ml-6">
                  <span class="step">2A</span>
                  <h3 class="step-title">Student Path (Event Discovery)</h3>
                  <p class="step-desc">View all available events in real-time. Use the <b>Filter by Type</b> option (Hackathon, Seminar, etc.) to quickly find relevant opportunities.</p>
                </li>
                <li class="ml-6">
                  <span class="step">2B</span>
                  <h3 class="step-title">Organizer Path (Event Management)</h3>
                  <p class="step-desc">Use the <b>Post New Event</b> form to upload event details to the public cloud database. Manage existing events below: Edit or Delete with confirmation.</p>
                </li>
                <li class="ml-6">
                  <span class="step">3</span>
                  <h3 class="step-title">Help & Support</h3>
                  <p class="step-desc">Use the chatbot for immediate help and guidance on using the website.</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 p-4 text-center">
      <p class="text-sm text-gray-500 dark:text-gray-400">
        © <span id="yearNow"></span> Proximo</p>
    </footer>
  </div>

  <!-- Modals -->
  <div id="modalOverlay" class="fixed inset-0 bg-gray-900/75 hidden items-center justify-center p-4 z-[60]">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-6 border-t-4 border-indigo-500">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modalTitle" class="text-xl font-bold">Notice</h3>
        <button id="modalClose" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
          <i data-lucide="x" class="w-6 h-6"></i>
        </button>
      </div>
      <div id="modalBody" class="text-gray-700 dark:text-gray-300 mb-6"></div>
      <div class="flex justify-end space-x-3">
        <button id="modalConfirm" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-200 hidden">Confirm</button>
        <button id="modalOkay" class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition duration-200">Close</button>
      </div>
    </div>
  </div>

  <!-- App script (Firebase + logic) -->
  <script type="module" src="script.js"></script>
  <script>
    // Initialize icons after DOM
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      document.getElementById('yearNow').textContent = new Date().getFullYear();
    });
  </script>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDE_Oqg2RT7ePxZPbv-kh3ABOwLZlTQe8A",
    authDomain: "proximo-55534.firebaseapp.com",
    projectId: "proximo-55534",
    storageBucket: "proximo-55534.firebasestorage.app",
    messagingSenderId: "604748678199",
    appId: "1:604748678199:web:af2a5d95511f938b912bb2",
    measurementId: "G-CFMJ6P20QW"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

</body>
</html>
